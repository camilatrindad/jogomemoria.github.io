<!doctype html>
<html lang="pt-BR">
<head><link rel="icon" href="favicon.ico" type="image/x-icon">

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Jogo da MemÃ³ria</title>

<style>
  :root{
    --card-size: min(130px, 24vw);
    --pink: #ffb7d5;
    --pink-border: #ff93c8;
  }

  body{
    font-family: "Poppins", Arial, sans-serif;
    background: linear-gradient(180deg,#ffe6f5,#fff4fc);
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    padding:20px;
    overflow:hidden;
  }

  h1{
    text-align:center;
    color:#ff66b3;
    margin-bottom:10px;
    text-shadow:0 0 10px rgba(255,130,200,0.5);
  }

  .stats{
    text-align:center;
    color:#555;
    margin-bottom:15px;
  }

  .board{
    display:grid;
    grid-template-columns:repeat(4,1fr);
    gap:15px;
    justify-items:center;
  }

  /* CARTAS COM GLITTER */
  .card{
    width:var(--card-size);
    height:var(--card-size);
    perspective:900px;
    cursor:pointer;
    position:relative;
  }

  .card::before{
    content:"";
    position:absolute;
    inset:-5px;
    border-radius:25px;
    background:
      conic-gradient(
        from 0deg,
        #ff93c8,
        #ffb7e6,
        #fff,
        #ffd2ec,
        #ff93c8
      );
    filter:blur(6px);
    opacity:0.9;
    animation:glitter 3s linear infinite;
    z-index:-1;
  }

  @keyframes glitter{
    0%{transform:rotate(0);}
    100%{transform:rotate(360deg);}
  }

  .card-inner{
    width:100%;
    height:100%;
    position:relative;
    transform-style:preserve-3d;
    transition:transform .6s cubic-bezier(.22,1.28,.44,1);
    border-radius:20px;
  }

  .card.flip .card-inner{
    transform:rotateY(180deg) scale(1.05);
  }

  .face{
    position:absolute;
    inset:0;
    backface-visibility:hidden;
    border-radius:20px;
    border:3px solid var(--pink-border);
    overflow:hidden;
    box-shadow:0 8px 20px rgba(255,100,180,0.25);
  }

  .back{
    background:linear-gradient(180deg,#ffc0dd,#ff9ac8);
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:28px;
    color:white;
    animation:pulse 1.8s infinite ease-in-out;
  }

  @keyframes pulse{
    0%,100%{box-shadow:0 0 12px #ff9ac8;}
    50%{box-shadow:0 0 20px #ff66b3;}
  }

  .front{
    transform:rotateY(180deg);
    background:white;
  }

  .front img{
    width:100%;
    height:100%;
    object-fit:cover;
  }

  button{
    margin-top:20px;
    padding:10px 25px;
    background:#ff66b3;
    color:white;
    border:none;
    border-radius:12px;
    cursor:pointer;
    font-weight:600;
    box-shadow:0 4px 12px rgba(255,80,160,0.25);
  }

  /* CONFETE */
  #confetti-container{
    position:fixed;
    inset:0;
    pointer-events:none;
    overflow:hidden;
    z-index:999999;
  }

</style>
</head>
<body>

<div id="confetti-container"></div>

<div class="container">
  <h1>ðŸŽ€ Jogo da MemÃ³ria ðŸŽ€</h1>

  <div class="stats">
    <span id="moves">Jogadas: 0</span> |
    <span id="time">Tempo: 00:00</span>
  </div>

  <div id="board" class="board"></div>

  <div style="text-align:center;">
    <button id="restart">Reiniciar</button>
  </div>
</div>

<script>
(() => {

  /* IMAGENS */
  const imgs = [
    "images.png",
    "images 1.png",
    "images 2.png",
    "images 3.png",
    "images4.png",
    "images5.png"
  ];

  /* SONS */
  const flipSound = new Audio("sounds/flip.mp3");
  const matchSound = new Audio("sounds/match.mp3");
  const wrongSound = new Audio("sounds/wrong.mp3");
  const winSound = new Audio("sounds/win.mp3");

  let deck = [];
  let first = null;
  let second = null;
  let lock = false;
  let moves = 0;
  let startTime = null;
  let timer = null;

  const board = document.getElementById("board");
  const movesEl = document.getElementById("moves");
  const timeEl = document.getElementById("time");
  const confettiContainer = document.getElementById("confetti-container");

  function shuffle(arr){
    for(let i=arr.length-1;i>0;i--){
      const j=Math.floor(Math.random()*(i+1));
      [arr[i],arr[j]]=[arr[j],arr[i]];
    }
    return arr;
  }

  function format(ms){
    const s=Math.floor(ms/1000);
    const m=String(Math.floor(s/60)).padStart(2,"0");
    const ss=String(s%60).padStart(2,"0");
    return `${m}:${ss}`;
  }

  function startTimer(){
    startTime=Date.now();
    timer=setInterval(()=>{
      timeEl.textContent="Tempo: "+format(Date.now()-startTime);
    },500);
  }

  function stopTimer(){
    clearInterval(timer);
  }

  function render(){
    board.innerHTML="";
    deck.forEach(src=>{
      const card=document.createElement("div");
      card.className="card";
      card.dataset.img=src;

      card.innerHTML=`
        <div class="card-inner">
          <div class="face back">âœ¨</div>
          <div class="face front"><img src="${src}"></div>
        </div>
      `;

      card.addEventListener("click", ()=> flip(card));
      board.appendChild(card);
    });
  }

  function flip(card){
    if(lock) return;
    if(card.classList.contains("flip")) return;

    flipSound.currentTime=0;
    flipSound.play();

    if(!startTime) startTimer();

    card.classList.add("flip");

    if(!first){
      first=card;
      return;
    }

    second=card;
    moves++;
    movesEl.textContent="Jogadas: "+moves;

    if(first.dataset.img===second.dataset.img){
      matchSound.play();
      first=null;
      second=null;

      const done=document.querySelectorAll(".card.flip").length;

      if(done===deck.length){
        stopTimer();
        setTimeout(()=>{
          winSound.play();
          explodeConfetti();
        }, 300);
      }

    }else{
      lock=true;
      wrongSound.play();
      setTimeout(()=>{
        first.classList.remove("flip");
        second.classList.remove("flip");
        first=null;
        second=null;
        lock=false;
      },900);
    }
  }

  /* CONFETE */
  function explodeConfetti(){
    for(let i=0;i<120;i++){
      const confetti=document.createElement("div");
      confetti.style.position="absolute";
      confetti.style.width="8px";
      confetti.style.height="8px";
      confetti.style.backgroundColor=randomColor();
      confetti.style.top="50%";
      confetti.style.left="50%";
      confetti.style.borderRadius="50%";
      confetti.style.opacity="0.9";
      confetti.style.transform=`translate(-50%,-50%)`;

      const angle=Math.random()*360;
      const distance= Math.random()*350+80;
      const duration= Math.random()*1500+800;

      confetti.animate([
        { transform:`translate(-50%,-50%) rotate(0deg)`, opacity:1 },
        { transform:`translate(${Math.cos(angle)*distance}px,${Math.sin(angle)*distance}px) rotate(720deg)`, opacity:0 }
      ],{
        duration:duration,
        easing:"ease-out"
      });

      confettiContainer.appendChild(confetti);

      setTimeout(()=> confetti.remove(), duration+200);
    }
  }

  function randomColor(){
    const colors=["#ff66b3","#ff93c8","#ffd2ec","#ffb7e6","#ffc0dd","#ffe0f2"];
    return colors[Math.floor(Math.random()*colors.length)];
  }

  function reset(){
    stopTimer();
    moves=0;
    first=null;
    second=null;
    lock=false;
    startTime=null;
    movesEl.textContent="Jogadas: 0";
    timeEl.textContent="Tempo: 00:00";

    deck=shuffle([...imgs,...imgs]);
    render();
  }

  document.getElementById("restart").onclick=reset;
  reset();

})();
</script>

</body>
</html>
